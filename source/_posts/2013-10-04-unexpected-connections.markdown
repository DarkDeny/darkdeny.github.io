---
layout: post
title: "Unexpected connections"
date: 2013-10-07 15:19
comments: true
categories: ruby
---


Когда рисовал предыдущий пост, обнаружил, что при попытке подсветить код, рубийный gem - pygments.rb под windows не хочет работать. Сначало следствие привело меня к стандартному рубийному Process:spawn, и мне показалось, что он не пашет под вин7 64 бит. Правда позже, решив понять, что же именно пытается запустить этот gem, я открыл его исходники и, как и положено - ВНЕЗАПНО, понял что же такое хитрое там происходит. Оказалось pygments.rb, якобы "порт" питоновского pygments, является всего лишь оберткой вокруг того самого питоновского скрипта, и собственно рубийная версия всего лишь пытается запустить питоновский интерпретатор, чтобы обhighlight'ить код, переправив исходный код в питоновский скрипт. Ну а поскольку в моей системе питона установлено не было, то попытка запуска процесса пресказуема падала, но рубийный код это тихо проглатывал, умалчивая о проблемах.


Также обнаружил достаточно странную штуку - несмотря на наличие конфигурационного файлика, где можно прописать пути, где лежат сорцы, а где сгенеренным octopress'ом сайт, другие компоненты системы (например, Compass, генерящий css, и Webbrick-сервер для тестирования результата на локальном компьютере) об этом файлике ни сном, ни духом, и в каждом из них захардкожено ожидание наличии папки public. Буду fork'ать, исправлять эту штуку, и делать pull request!
